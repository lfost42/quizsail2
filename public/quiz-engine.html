<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <script src="./common.js"></script>
    <script type="module" src="quiz.js"></script>
    <script type="module" src="review.js"></script>
    <script type="text/javascript">
      window.addEventListener('keydown',function(e){if(e.keyIdentifier=='U+000A'||e.keyIdentifier=='Enter'||e.keyCode==13){if(e.target.nodeName=='INPUT'&&e.target.type=='text'){e.preventDefault();return false;}}},true);
      </script>
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
      * {
        font-family: 'Roboto',
        sans-serif;
        font-size: large;
      }
      html {
        height: 100%;
      }
      body {
        min-height: 100%;
        padding: 5vh 5vw;
      }
      body[data-mode="review"] #submitbtn,
      body[data-mode="review"] #stats {
          display: none !important;
      }
      form {
        background-color: rgba(238, 238, 238, 0.2);
        border: 1px dotted #eee;
        margin: 0 auto;
        max-width: 80vw;
        padding: 5vh 5vw;
        text-align: center;
      }
      input[type="button"] {
        background-color: lightgreen;
        cursor: pointer;
        display: inherit;
        padding: 2vh 6vw;
        margin-top: 3vh;
        margin-left: 6vh;
      }
      input[type="button"]:hover {
        background-color: green;
        filter: brightness(150%);
      }
      #choice_form{
        text-align: left;
      }
      #submit,
      #content {
        padding: 10px;
      }
      .footer {
        background-color: rgba(238, 238, 238, 1);
        bottom: 0;
        min-height: 3vh;
        left: 0;
        position: fixed;
        padding: 10px;
        width: 100%;
      }
      .footer small{
        font-size: 12px;
        margin-left: 3vw;
      }
      #stats{
        bottom: 15vh;
        min-height: 3vh;
        left: 0;
        margin-left: 3vw;
        margin-top: 5vh;
        position: fixed;
      }
      .input {
        padding: 5px;
      }
      code {
        font-family: 'Roboto Mono', monospace;
        font-size: 14px;
        background-color: #ffffff;
        border: 5px solid #ffffff;
        overflow-x: auto; 
        border-radius: 4px;
      }
      @media screen and (max-width: 767px) {
        input, form, #stats{
          padding: 1vw;
          position: relative;
        }
        #question{
          padding: 1vw;
        }
        #choices{
          padding: 1vw 1vh;
          max-width: 100vw;
          min-width: 80vw;
          min-height: 80vh;
        }
        #stats{
          /*margin-left: 15vw;*/
          min-width: 90vw;
        }
      }
      .category-list {
        margin: 15px 0;
      }

      .category-list label {
        display: block;
        margin: 8px 0;
        padding: 8px;
        background: #f5f5f5;
        border-radius: 4px;
      }
      .category-checkbox {
        margin-right: 8px;
      }
      .completion-buttons {
        margin-top: 5px;
        display: flex;
        gap: 10px;
        justify-content: center;
      }
      .completion-buttons button {
        padding: 5px 10px;
        cursor: pointer;
      }
      .correct{
        color: rgb(0, 159, 0);
      }
      .incorrect{
        color: red;
      }
      .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.4);
      }
      .modal-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
      }
      .close {
        color: #505050;
        float: right;
        font-size: 30px;
        font-weight: bold;
        cursor: pointer;
      }
      #modalTextarea {
        width: 100%;
        height: 100px;
        margin: 15px 0;
        padding: 8px;
        box-sizing: border-box;
        font-family: 'Roboto Mono', monospace;
      }
      #modalSubmit {
        background-color: #4f9a52;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        float: right;
      }
      #modalSubmit:hover {
        background-color: #39653b;
      }
      #modalBack {
        background-color: #a82b0e;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        float: right;
      }
      #modalBack:hover {
        background-color: #6a2610;
      }
      #editSelectionContent ul {
        list-style-type: none;
        padding: 0;
      }
      #editSelectionContent li {
        padding: 10px;
        cursor: pointer;
        border-bottom: 1px solid #ddd;
      }
      #editSelectionContent li:hover {
        background-color: #f5f5f5;
      }
      /* child modal */
      .modal-buttons {
        display: flex;
        gap: 10px;
        margin-top: 15px;
        justify-content: flex-end;
      }
    </style>
  </head>
  <body>
    <div id="question"></div>
    <div id="choices">
      <form id="choice_form">
        
      </form>
      <div id="result"></div>
    </div>

    <br/>
    <div id="stats"></div>
    <div id="content"></div>
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get('mode') === 'review') {
        document.body.dataset.mode = 'review';
      }
    </script>

    <footer class="footer">
      <small>QuizSail 2.0</small>
      <a href="#" onclick="window.location.href = window.location.origin + '/index.html'; return false;">[Return to Start]</a></small>
    </footer>
  </body>
</html>